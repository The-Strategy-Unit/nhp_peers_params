---
title: "`r params$selected_peer` - Activity Avoidance"
format:
  html: 
    self-contained: true
editor: visual
params:
  selected_peer: "RCX"
number-sections: true
number-depth: 3
toc: true
toc-depth: 3
toc-expand: false
---

```{r, echo = F, warning = F, results = "asis"}
source("plot_activity_mitigator_fun.R")

df <- readRDS("secret/plot_data.RDS") |> 
  dplyr::mutate(highlighted_scheme = params$selected_peer)

for(a in unique(df$activity_type)){
  df_a <- df |> dplyr::filter(activity_type == a)
  cat("## ", a,   "\n")
  
   for(b in unique(df_a$strategy)){
    df_b <- df_a |> dplyr::filter(strategy == b)
    cat("###", b, "\n")
  
  for(c in unique(df_b$time_profile)){
    df_c <- df_b |> dplyr::filter(time_profile == c)
    cat("####", c, "\n")
  
#  for(d in unique(df_c$time_profile)){
 #   df_d <- df_c |>  dplyr::filter(time_profile == d)
  #  cat("#####", d, "\n")
  
    for(d in 1:nrow(df_c)){
      df_c |> 
        purrr::pmap(make_activity_mitigator_graphs)
   # }
  }
  }
   }
  }
```
